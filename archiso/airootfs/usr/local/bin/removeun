#!/bin/bash
#set -e

_clean_files() {
    local _files_to_remove=(
    /etc/modprobe.d/nvidia-utils.conf
    /etc/modules-load.d/nvidia-utils.conf
)
    local xx
    for xx in "${_files_to_remove[@]}"; do rm -f "$xx" || true; done
}

# taken from Erik Dubois script
_clean_packages() {
    local _packages_to_remove=(
    gparted
    grsync
    cachyos-calamares
    cachyos-calamares-config
    edk2-shell
    boost-libs
    doxygen
    expect
    gpart
    tcpdump
    arch-install-scripts
    squashfs-tools
    extra-cmake-modules
    cmake
    elinks
    yaml-cpp
    syslinux
    clonezilla
    memtest86+
    mkinitcpio-archiso
)
    local xx
    # @ does one by one to avoid errors in the entire process
    # * can be used to treat all packages in one command
    for xx in "${_packages_to_remove[@]}"; do pacman -Rsc "$xx" --noconfirm; done
}

_clean_packages
_clean_files
